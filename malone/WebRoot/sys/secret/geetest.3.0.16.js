/*! gt-curtain - v3.0.16 - 2015-06-17
* Copyright (c) 2015 ; Licensed  */
"use strict";!function(a,b){a.Geetest=b(a,a.jQuery||a.Zepto||a.ender||a.$),"function"==typeof define&&define.amd?define("Geetest",["jquery"],function(c){return b(a,c)}):"undefined"!=typeof exports&&(exports=b(a))}(this,function(a,b){var c={};c.list={},c.list.global={},c.addItem=function(a){c.list[a]={}},c.on=function(a,b,d){return d?(c.list[d][a]||(c.list[d][a]=[]),void c.list[d][a].push({once:!1,callback:b})):(c.list.global[a]||(c.list.global[a]=[]),void c.list.global[a].push({once:!1,callback:b}))},c.once=function(a,b,d){return d?(c.list[d][a]||(c.list[d][a]=[]),void c.list[d][a].push({once:!0,callback:b})):(c.list.global[a]||(c.list.global[a]=[]),void c.list.global[a].push({once:!0,callback:b}))},c.remove=function(a,b,d){var e;e=d?c.list[d][a]:c.list.global[a],e.splice(l(b,e),1)},c.destroy=function(a,b){m(c.list,b)},c.emit=function(a,b){var d,e=c.list[b][a];if(e)for(var f=0;f<e.length;f++)d=e[f],d&&(d.callback.call(w.get("self",b)),d.once&&(c.remove(a,d,b),f-=1))},c.broadcast=function(a){var b,d=c.list.global[a];if(d)for(var e=0;e<d.length;e++)b=d[e],b&&(b.callback(),b.once&&c.remove(a,b.callback))};var d={challenge:"",type:"slide",fullbg:"",bg:"",slice:"",xpos:0,ypos:0,height:116,link:"javascript:;",version:"3.0.0",https:!1,logo:!0,product:"float",id:"",theme:"golden",theme_version:"3.0.0"},e={loaded_theme:{},apiserver:"http://api.geetest.com/",staticserver:"http://static.geetest.com/"},f=function(a,b){var c=b||{};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);return c},g=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")},h=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(a[c]="undefined"!=typeof b[c]?b[c]:a[c])},i=function(a){return h(e,a),f(a,f(d))},j=function(a){return"function"==typeof a},k=function(){return parseInt(1e4*Math.random())+(new Date).valueOf()},l=function(a,b,c){var d,e=Array.prototype.indexOf;if(b){if(e)return e.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},m=function(a,b){a[b]=void 0;try{delete a[b]}catch(c){}},n=document.createElement("img");n.onload=n.onerror=function(){var a="jpg";2===n.height&&(a="webp"),e.webp=a,c.broadcast("WebPLoaded")},n.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA";var o=/msie 6/i.test(navigator.userAgent),p=-1,q=function(){p="transition"in document.body.style||"webkitTransition"in document.body.style||"mozTransition"in document.body.style||"msTransition"in document.body.style};"body"in document&&q(),o&&(e.webp="jpg");var r=function(a,b){try{a.innerHTML=b}catch(c){a.innerText=b}},s=function(a,b){return this.id=k(),c.addItem(this.id),w.addItem(this.id,this),this.config=i(a),b?(t(a,this),this.bindOn("#"+a.popupbtnid)):v(e.apiserver+"get.php?"+g(a),t,this),this},t=function(a,b){return a?(-1==p&&q(),b.config=i(a),w.put("loaded",!0,b.id),c.emit("loaded",b.id),c.on("success",S.onSuccess,b.id),c.on("refresh",S.onRefresh,b.id),c.on("fail",S.onFail,b.id),c.on("forbidden",S.onForbidden,b.id),c.on("abuse",S.onAbuse,b.id),c.on("error",S.onError,b.id),c.once("DOMReady",S.onReady,b.id),e.loaded_theme[b.config.theme]||(e.loaded_theme[b.config.theme]=!0,u(b.config)),b):!1},u=function(a){var b=document.createElement("link");return b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a.staticserver+"static/"+a.theme+"/style"+(a.https?"_https":"")+"."+a.theme_version+".css"),document.getElementsByTagName("head")[0].appendChild(b),this},v=function(a,b,d){var e=document.createElement("script"),f="geetest_"+k();if(d&&"function"==typeof d.$){var g=d.$(".gt_slice");x.addClass(g,"wait")}var h=!1;window[f]=function(a){return g&&x.removeClass(g,"wait"),a.error?(c.emit("error",d.id),c.emit("statusChange",d.id),void m(window,f)):(b.call(d,a,d),void m(window,f))},e.onload=e.onreadystatechange=function(){h||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(h=!0,e.onload=e.onreadystatechange=e.onerror=null,e.parentNode.removeChild(e))},e.onerror=function(){b.call(d,!1,"Network Error")},e.src=a+"&callback="+f,document.getElementsByTagName("head")[0].appendChild(e)},w={};w.list={},w.addItem=function(a,b){w.list[a]={},w.list[a].self=b},w.put=function(a,b,c){return w.list[c][a]=b,b},w.get=function(a,b){return w.list[b][a]};var x={};x.Json2Html=function T(a,b,c){var d,e=document.createElement("div");if(b=b||e.cloneNode(),"string"==typeof a)return void b.appendChild(document.createTextNode(a));for(d in a)if(a.hasOwnProperty(d)){var f,g=""===d.split(".")[0]?"div":d.split(".")[0];"input"===g?(f=document.createElement(g),f.className=d.split(".")[1],f.type="hidden",f.name=d.split(".")[1]):(f=document.createElement(g),f.className=d.split(".")[1]),b.appendChild(f),c(f),T(a[d],f,c)}return b.childNodes?b:null},x.json={".gt_widget":{".gt_holder_top":{},".gt_box_holder":{".gt_box":{".gt_loading":{},"a.gt_bg":{".gt_cut_bg":{},".gt_slice":{}},"a.gt_fullbg":{".gt_cut_fullbg":{},".gt_flash":{},".gt_ie_success":{}},"a.gt_curtain":{".gt_curtain_bg_wrap":{".gt_curtain_bg":{".gt_cut_curtain":{}}},".gt_curtain_button":{}},"a.gt_box_tips":{}},".gt_info":{".gt_info_tip":{".gt_info_time":{},".gt_info_score":{},".gt_info_countdown":{}}}},".gt_bottom":{"a.gt_refresh_button":{".gt_refresh_tips":{}},"a.gt_help_button":{".gt_help_tips":{}},"a.gt_logo_button":{}}},".gt_input":{"input.geetest_challenge":{},"input.geetest_validate":{},"input.geetest_seccode":{}},".gt_slider":{".gt_guide_tip":">>> 拖动滑块完成验证 >>>",".gt_slider_knob":{},".gt_curtain_tip":"点击上图按钮并沿道路拖动到终点处",".gt_curtain_knob":{},".gt_ajax_tip":{}}},x.after=function(a,b){return a.parentNode.insertBefore(b,a.nextSibling),b},x.parseSelector=function(a){return"string"==typeof a?0==a.indexOf("#")?a=document.getElementById(a.replace("#","")):"querySelector"in document?a=document.querySelector(a):j(window.jQuery)&&(a=window.jQuery(a)[0]):a.length&&(a=a[0]),a},x.fixOverflow=function(a){var b=function(a,b){var c;return a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=window.getComputedStyle(a,null).getPropertyValue(b)),c};try{for(var c=a;a.parentNode!=document.body&&c.offsetTop-a.parentNode.offsetTop<160;)a=a.parentNode,"hidden"==b(a,"overflow")&&(a.style.overflow="visible")}catch(d){}},x.append=function(a,b){var d=this;a=x.parseSelector(a),x.buildSelector(d);var e=d.$;if(d.dom="popup"!==d.config.product?x.Json2Html(x.json,!1,e):x.Json2Html(J.json,!1,e),d.dom.id=d.id,d.dom.className="gt_holder "+d.config.product,x.setType(d,!0),x.setLink(d),x.setBaseLink(d),x.loadImg(d,!0),B.bindEvent(d),C.bindEvent(d),N(d),e(".gt_flash").style.height=d.config.height-22+"px","float"==d.config.product&&I(d),"popup"==d.config.product){document.body.appendChild(d.dom);var f=e(".gt_input");b?x.after(a,f):a.appendChild(f)}else b?x.after(a,d.dom):a.appendChild(d.dom);setTimeout(function(){x.fixOverflow(d.dom)},2e3),w.put("DOMReady",!0,d.id),c.emit("DOMReady",d.id)},x.setType=function(a,b){"slide"==a.config.type?(B.show(a,b),C.hide(a,b)):(B.hide(a,b),C.show(a,b))},x.setBaseLink=function(a){var b=a.$,c=b(".gt_logo_button");c.href="http://www.geetest.com",c.target="_blank";var d=b(".gt_help_button");d.href="http://www.geetest.com/contact/#report",d.target="_blank"},x.setLink=function(a){var b=a.config.link;b||(b="javascript:;");var c=a.$(".gt_fullbg");c.href=b,c.target="_blank";var d=a.$(".gt_box_tips");d.href=b,d.target="_blank"},x.addClass=function(a,b){if(a){for(var c=b.split(" "),d=a.className.split(" "),e=0,f=c.length;f>e;e++)-1==l(c[e],d)&&d.push(c[e]);a.className=d.join(" ")}},x.removeClass=function(a,c){if(a){"string"==typeof a&&(a=b(a));for(var d,e=c.split(" "),f=a.className.split(" "),g=0,h=e.length;h>g;g++)d=l(e[g],f),-1!=d&&f.splice(d,1);a.className=f.join(" ")}},x.hasClass=function(a,b){var c=a.className.split(" ");return-1!=l(b,c)},x.getImg=function(a,b){var c=a,d=0,f=document.createElement("img");return f.onerror=function(){return-1!=this.src.indexOf("webp")?(e.webp="jpg",void(this.src=this.src.replace(".webp",".jpg"))):void(3>d&&(f.src=c+"?random="+k(),d++))},f.onload=b,f.src=a,o&&b(),f},x.getImages=function(a,b){var d=a.length,f=0,g=[],h=new Date,i=function(){f++,o||-1==this.src.indexOf("webp")||this.width&&!(this.width<10)||(e.webp="jpg"),f==d&&setTimeout(function(){for(var a=o?-2:(new Date).getTime()-h.getTime(),c=0;d>c;c++)g[c].src=g[c].src.replace(".webp","."+e.webp);b(g,a)})},j=function(){for(var b=0;d>b;b++)g.push(x.getImg(a[b].replace(".jpg","."+e.webp),i))};return e.webp?j():c.once("WebPLoaded",j),g},x.loadImg=function(a,b){var d=a.$,f=a.config.height;d(".gt_box_holder").style.height=f+"px";var g=a.config.type;if("slide"==g)x.getImages([e.staticserver+a.config.bg,e.staticserver+a.config.slice,e.staticserver+a.config.fullbg],function(e,f){z.render(e[2].src,e[0].src,a,b),w.put("imgload",f,a.id);var g=d(".gt_slice");o?g.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e[1].src+'")':(g.style.backgroundImage="url("+e[1].src+")",g.style.width=(e[1].width||60)+"px",g.style.height=(e[1].height||60)+"px"),g.style.top=a.config.ypos+"px",setTimeout(function(){w.put("status","ready",a.id),Q.show("ready",a),c.emit("statusChange",a.id)},300)});else{var h=900;b&&(h=0),x.getImages([e.staticserver+a.config.bg,e.staticserver+a.config.fullbg],function(e,f){var g=d(".gt_curtain_button");w.put("imgload",f,a.id),g.style.top=a.config.ypos+"px",g.style.left=a.config.xpos+"px",z.render(e[1].src,e[0].src,a,b),setTimeout(function(){w.put("status","ready",a.id),Q.show("ready",a),c.emit("statusChange",a.id)},h)})}},s.prototype.appendTo=function(a,b){return w.get("loaded",this.id)?x.append.call(this,a,b):c.once("loaded",function(){x.append.call(this,a,b)},this.id),this},x.buildSelector=function(a){var b=[];a.$=function(a){if("string"==typeof a){for(var c=0,d=b.length;d>c;c++)for(var e=b[c].className.split(" "),f=0,g=e.length;g>f;f++)if(e[f]==a.split(".")[1])return b[c];return!1}b.push(a)}};var y=function(){var a=x.addClass,b=x.removeClass,c=function(c,d,e){var f=function(){p&&d?(a(c,"gt_animate"),setTimeout(function(){a(c,"gt_hide")}),setTimeout(function(){b(c,"gt_show")},20),setTimeout(function(){b(c,"gt_animate")},d)):(b(c,"gt_show"),a(c,"gt_hide"))};return e?setTimeout(f,e):void f()},d=function(c,d,e){var f=function(){p&&d?(a(c,"gt_animate"),setTimeout(function(){b(c,"gt_hide")}),setTimeout(function(){a(c,"gt_show")},20),setTimeout(function(){b(c,"gt_animate")},d+20)):(b(c,"gt_hide"),a(c,"gt_show"))};return e?setTimeout(f,e):void f()},e=function(c,d,e,f,g){var h=function(){p&&d?(a(c,"gt_animate"),"function"==typeof f&&f(),"function"==typeof g&&setTimeout(g,0),setTimeout(function(){b(c,"gt_animate")},d)):"function"==typeof g&&g()};return e?setTimeout(h,e):void h()};return{hide:c,show:d,move:e}}(),z=function(){var a=function(){for(var a,b="6_11_7_10_4_12_3_1_0_5_2_9_8".split("_"),c=[],d=0,e=52;e>d;d++)a=2*parseInt(b[parseInt(d%26/2)])+d%2,parseInt(d/2)%2||(a+=d%2?-1:1),a+=26>d?26:0,c.push(a);return c},b=function(a){var b=a(".gt_fullbg"),c=a(".gt_bg"),d=a(".gt_slice"),e=a(".gt_curtain");b.style.backgroundImage="none",c.style.backgroundImage="none",e.style.backgroundImage="none",d.style.backgroundImage="none",y.hide(b),y.hide(c),y.hide(e),y.hide(d)},c=function(a,b){var c=300,d=600;b&&(c=d=0);var e=a.$;y.show(e(".gt_fullbg"),c),"slide"==a.config.type?(y.show(e(".gt_bg"),0,c),y.show(e(".gt_slice"),0,c)):(y.show(e(".gt_curtain"),d),y.show(e(".gt_curtain_button"),d))},d=function(b,c,d,f,g){var h=8!==c.replace(e.staticserver,"").split("/")[2].length;if(!h)return void(d.style.backgroundImage="url("+c+")");var i,j,k,l=[];if(w.get(b+"Arr",g.id))for(l=w.get(b+"Arr",g.id),i=0,j=l.length;j>i;i++)l[i].style.backgroundImage="url("+c+")";else{w.put(b+"Arr",l,g.id);var m,n=a(),o=document.createElement("div");for(o.className="gt_cut_"+b+"_slice",i=0,j=n.length;j>i;i++)k="-"+(n[i]%26*12+1)+"px "+(n[i]>25?-g.config.height/2:0)+"px",m=o.cloneNode(),m.style.backgroundImage="url("+c+")",l.push(m),f.appendChild(m),m.style.backgroundPosition=k}},f=function(a,e,f,g){var h=f.$;b(h),d("fullbg",a,h(".gt_fullbg"),h(".gt_cut_fullbg"),f),"slide"==f.config.type?d("bg",e,h(".gt_bg"),h(".gt_cut_bg"),f):d("curtain",e,h(".gt_curtain_bg"),h(".gt_cut_curtain"),f),setTimeout(function(){c(f,g)},100)};return{render:f,clear:b}}(),A={};A.events={down:["mousedown","touchstart","pointerdown","MSPointerDown"],move:["mousemove","touchmove","pointermove","MSPointerMove"],up:["mouseup","touchend","pointerup","MSPointerUp"],click:["click"]},A.list=[],A.get=function(a,b){for(var c,d=0,e=A.list.length;e>d;d++)if(c=A.list[d],c.dom==a&&c.event==b)return c;return c={dom:a,event:b,handlerList:[],handler:function(){}},A.list.push(c),c},A.addEvent=function(a,b,c){for(var d,e=A.events[b],f=A.get(a,b),g=0,h=e.length;h>g;g++)f.handlerList.length&&(d=f.handler,window.addEventListener?a.removeEventListener(e[g],d,!1):window.attachEvent&&a.detachEvent("on"+e[g],d)),window.addEventListener?(f.handlerList.push(c),f.handler=function(b){for(var c=0,d=f.handlerList.length;d>c;c++)f.handlerList[c](b).call(a)},a.addEventListener(e[g],c,!1)):window.attachEvent&&a.attachEvent("on"+e[g],c)};var B={};B.show=function(a){var b=a.$;y.show(b(".gt_guide_tip"),500),y.show(b(".gt_slider_knob"),500)},B.hide=function(a){var b=a.$;y.hide(b(".gt_bg"),500),y.hide(b(".gt_slider_knob"),500),y.hide(b(".gt_guide_tip"),500),setTimeout(function(){B.move(0,b,0)},500)},B.handler=function(a){var b=this,d=b.$,e=d(".gt_slice"),f=d(".gt_slider_knob");if(a.type)return P.show("fail",b,3e3),Q.show("lock",b),y.show(d(".gt_fullbg"),300),void setTimeout(function(){M(a,b)},500);if(a.success){var g=d(".gt_flash");w.put("score",a.score,b.id),P.show("success",b),Q.show("success",b),p||y.show(d(".gt_ie_success")),y.show(g,1500),y.hide(g,0,1600),y.show(d(".gt_fullbg"),1500),R.write(a.validate,b),c.emit("success",b.id),setTimeout(function(){w.put("status","success",b.id),c.emit("statusChange",b.id)},400)}else"fail"==a.message?(P.show("fail",b),Q.show("fail",b),y.hide(e,100),y.show(e,100,100),y.hide(e,100,200),y.show(e,100,300),y.move(e,400,500,!1,function(){B.move(0,d,!0)}),y.move(f,400,500),c.emit("fail",b.id),setTimeout(function(){w.put("status","ready",b.id),Q.show("ready",b),c.emit("statusChange",b.id)},1e3)):"forbidden"==a.message?(P.show("forbidden",b),Q.show("forbidden",b),c.emit("forbidden",b.id),setTimeout(function(){b.refresh()},4e3)):"abuse"==a.message&&(P.show("abuse",b),Q.show("fail",b),c.emit("abuse",b.id),setTimeout(function(){b.refresh()},1500))},B.move=function(a,b,c){var d=b(".gt_slider_knob"),e=b(".gt_slice");return a=2>a?2:a>198?198:a,c&&(a=0),"webkitTransform"in document.body.style||"transform"in document.body.style?void(d.style.webkitTransform=d.style.transform=e.style.webkitTransform=e.style.transform="translate("+a+"px, 0px)"):(d.style.left=a+"px",void(e.style.left=a+"px"))},B.downBuilder=function(a){var b=a.$;return function(d){var e=w.get("status",a.id);if("ready"==e&&"slide"==a.config.type&&2!=d.button){w.put("startTime",new Date,a.id),w.put("status","moving",a.id),c.emit("statusChange",a.id),d.preventDefault?d.preventDefault():d.returnValue=!1;var f=b(".gt_slider_knob");x.addClass(b(".gt_slice"),"moving"),x.addClass(f,"moving");var g=Math.round(d.clientX||d.changedTouches&&d.changedTouches[0].clientX),h=Math.round(d.clientY||d.changedTouches&&d.changedTouches[0].clientY),i=f.getBoundingClientRect();w.put("startX",g,a.id),w.put("startY",h,a.id),O.init([Math.round(i.left-g),Math.round(i.top-h),0],a.id),O.push([0,0,0],a.id),y.hide(b(".gt_fullbg"),300),y.hide(b(".gt_guide_tip"),500)}}},B.moveBuilder=function(a){var b=a.$;return function(c){var d=w.get("status",a.id);if("moving"==d&&"slide"==a.config.type){c.preventDefault?c.preventDefault():c.returnValue=!1;var e=w.get("startX",a.id),f=w.get("startY",a.id),g=Math.round((c.changedTouches&&c.changedTouches[0].clientX||c.clientX)-e),h=Math.round(f-(c.changedTouches&&c.changedTouches[0].clientY||c.clientY)),i=parseInt(g);B.move(i,b),O.push([g,h,(new Date).getTime()-w.get("startTime",a.id)],a.id)}}},B.upBuilder=function(a){var b=a.$;return function(c){var d=w.get("status",a.id);if("moving"==d&&"slide"==a.config.type){d=w.put("status","lock",a.id),Q.show("lock",a),x.removeClass(b(".gt_slice"),"moving"),x.removeClass(b(".gt_slider_knob"),"moving");var f=w.get("startX",a.id),h=w.get("startY",a.id),i=Math.round((c.changedTouches&&c.changedTouches[0].clientX||c.clientX)-f),j=Math.round(h-(c.changedTouches&&c.changedTouches[0].clientY||c.clientY)),k=new Date;w.put("endTime",k,a.id),O.push([i,j,k.getTime()-w.get("startTime",a.id)],a.id);var l=parseInt(i),m=O.encode(a.id);v(e.apiserver+"ajax.php?"+g({challenge:a.config.challenge,userresponse:B.getResponse(l,a.config.challenge),passtime:w.get("endTime",a.id).getTime()-w.get("startTime",a.id),imgload:w.get("imgload",a.id),a:m}),B.handler,a)}}},B.bindEvent=function(a){var b=a.$,c=b(".gt_slider_knob");A.addEvent(c,"down",B.downBuilder(a)),A.addEvent(document,"move",B.moveBuilder(a)),A.addEvent(document,"up",B.upBuilder(a))},B.getResponse=function(a,b){for(var c=b.slice(32),d=[],e=0;e<c.length;e++){var f=c.charCodeAt(e);d[e]=f>57?f-87:f-48}c=36*d[0]+d[1];var g=Math.round(a)+c;b=b.slice(0,32);var h,i=[[],[],[],[],[]],j={},k=0;e=0;for(var l=b.length;l>e;e++)h=b.charAt(e),j[h]||(j[h]=1,i[k].push(h),k++,k=5==k?0:k);for(var m,n=g,o=4,p="",q=[1,2,5,10,50];n>0;)n-q[o]>=0?(m=parseInt(Math.random()*i[o].length,10),p+=i[o][m],n-=q[o]):(i.splice(o,1),q.splice(o,1),o-=1);return p};var C={};C.handler=function(a){var b=this.$,d=this,e=b(".gt_curtain_button"),f=250;if(a.success){var g=b(".gt_flash");w.put("score",a.score,d.id),P.show("success",d),Q.show("success",d),x.removeClass(e,"moving"),x.addClass(e,"success"),p?(y.hide(e,150,f),y.show(e,150,2*f),y.hide(e,150,3*f),y.hide(b(".gt_curtain_bg_wrap"),500,3*f),y.show(g,1500,3*f),y.hide(g,0,3*f+1500+100),y.hide(b(".gt_curtain"),0,3*f)):(y.show(b(".gt_ie_success")),y.hide(e,150),y.hide(b(".gt_curtain_bg_wrap"),150),y.hide(b(".gt_curtain"),0,150)),setTimeout(function(){x.removeClass(e,"success"),w.put("status","success",d.id),c.emit("statusChange",d.id),R.write(a.validate,d),c.emit("success",d.id)},2e3)}else"fail"==a.message?(x.removeClass(e,"moving"),x.addClass(e,"fail"),P.show("fail",d),Q.show("fail",d),y.hide(e,150,f),y.show(e,150,2*f),y.hide(e,150,3*f),y.show(e,150,4*f),setTimeout(function(){x.removeClass(e,"fail"),y.move(e,400,0,!1,function(){C.btnMove([d.config.xpos,d.config.ypos],d)}),y.move(b(".gt_curtain_bg_wrap"),400,0,!1,function(){C.curtainMove(d.config.xpos,d)})},5*f),setTimeout(function(){w.put("status","ready",d.id),c.emit("statusChange",d.id),c.emit("fail",d.id)},5*f+400)):"forbidden"==a.message?(P.show("forbidden",d),Q.show("forbidden",d),c.emit("forbidden",d.id),setTimeout(function(){d.refresh()},4e3)):"abuse"==a.message&&(P.show("abuse",d),Q.show("fail",d),c.emit("fail",d.id),setTimeout(function(){d.refresh()},1500))},C.hide=function(a){var b=a.$;y.hide(b(".gt_curtain")),y.hide(b(".gt_curtain_button")),y.hide(b(".gt_curtain_tip")),y.hide(b(".gt_curtain_knob"))},C.show=function(a,b){var c=a.$,d=300,e=600;b&&(d=e=0),C.curtainMove(0,a),y.show(c(".gt_curtain_bg_wrap")),"float"!=a.config.product?(y.show(c(".gt_curtain_tip"),d),y.hide(c(".gt_curtain_knob"),d)):C.setFloat(!b,a)},C.btnMove=function(a,b){var c=b.$,d=c(".gt_curtain_button");d.style.left=C.limit(a[0],260)+"px",d.style.top=C.limit(a[1],b.config.height)+"px"},C.curtainMove=function(a,b){var c=b.$,d=c(".gt_curtain_bg_wrap");a=C.limit(a,260),d.style.width=260-a+"px",d.style.left=a+"px"},C.setFloat=function(a,b,c){if(c=c||0,"curtain"==b.config.type){var d=b.$,e=d(".gt_curtain_tip"),f=d(".gt_curtain_knob"),g=[];return a?(g.push(y.show(e,300,c)),g.push(y.hide(f,300,c))):(g.push(y.hide(e,300,c)),g.push(y.show(f,300,c))),g}},C.limit=function(a,b){return 0>a?0:a>b?b:a},C.downBuilder=function(a){var b=a.$;return function(d){var e=w.get("status",a.id);if("ready"==e&&"curtain"==a.config.type&&2!=d.button){w.put("startTime",new Date,a.id),w.put("status","moving",a.id),c.emit("statusChange",a.id),d.preventDefault?d.preventDefault():d.returnValue=!1;var f=b(".gt_curtain_button");x.addClass(f,"moving");var g=d.clientX||d.changedTouches&&d.changedTouches[0].clientX,h=d.clientY||d.changedTouches&&d.changedTouches[0].clientY,i=f.getBoundingClientRect();O.init([Math.round(i.left-g),Math.round(i.top-h),0],a.id),O.push([0,0,0],a.id),w.put("startX",g,a.id),w.put("startY",h,a.id),C.curtainMove(a.config.xpos,a),C.btnMove([a.config.xpos,a.config.ypos],a)}}},C.moveBuilder=function(a){a.$;return function(b){var c=w.get("status",a.id);if("moving"==c&&"curtain"==a.config.type){b.preventDefault?b.preventDefault():b.returnValue=!1;var d=w.get("startX",a.id),e=w.get("startY",a.id),f=(b.changedTouches&&b.changedTouches[0].clientX||b.clientX)-d,g=(b.changedTouches&&b.changedTouches[0].clientY||b.clientY)-e,h=parseInt(f),i=parseInt(g);O.push([h,i,(new Date).getTime()-w.get("startTime",a.id)],a.id),C.curtainMove(a.config.xpos+f,a),C.btnMove([a.config.xpos+f,a.config.ypos+g],a)}}},C.upBuilder=function(a){a.$;return function(b){var c=w.get("status",a.id);if("moving"==c&&"curtain"==a.config.type){var d=w.get("startX",a.id),f=w.get("startY",a.id),h=(b.changedTouches&&b.changedTouches[0].clientX||b.clientX)-d,i=(b.changedTouches&&b.changedTouches[0].clientY||b.clientY)-f,j=parseInt(h),k=parseInt(i);O.push([j,k,(new Date).getTime()-w.get("startTime",a.id)],a.id),w.put("endTime",new Date,a.id),c=w.put("status","lock",a.id),Q.show("lock",a),v(e.apiserver+"ajax.php?"+g({challenge:a.config.challenge,passtime:w.get("endTime",a.id).getTime()-w.get("startTime",a.id),imgload:w.get("imgload",a.id),a:O.encode(a.id)}),C.handler,a)}}},C.bindEvent=function(a){var b=a.$,c=b(".gt_curtain_button");A.addEvent(c,"down",C.downBuilder(a)),A.addEvent(document,"move",C.moveBuilder(a)),A.addEvent(document,"up",C.upBuilder(a))};var D=function(a){return function(){E(a)}},E=function(a){for(var b=250,c=800,d=w.get("status",a.id),e="ready"==d||"success"==d||"error"==d,f=w.get("in",a.id),g=a.$(".gt_widget"),h=w.get("hideDelay",a.id)||[],i=0,j=h.length;j>i;i++)clearTimeout(h[i]);h=[];var k;if(e&&!f){if(x.hasClass(g,"gt_hide"))return;"curtain"==a.config.type&&(k=C.setFloat(!1,a,c),h=h.concat(k)),h.push(y.hide(g,400,c)),w.put("hideDelay",h,a.id)}if(!e||f){if(x.hasClass(g,"gt_show"))return;b=e?b:0,"curtain"==a.config.type&&(k=C.setFloat(!0,a,b),h=h.concat(k)),h.push(y.show(g,400,b)),w.put("hideDelay",h,a.id)}},F=function(a,b){if(!a||null==a||"undefined"==typeof a)return!1;if(b.compareDocumentPosition){var c=b.compareDocumentPosition(a);return!(20!==c&&0!==c)}if(b.contains)return b.contains(a);for(;a!=b&&a;)a=a.parentNode;return a?!0:!1},G=function(a){return function(b){H(b,a)}},H=function(a,b){var d=a.target||a.srcElement,e=w.get("in",b.id),f=F(d,b.dom);e!=f&&(w.put("in",f,b.id),c.emit("hoverChange",b.id))},I=function(a){var b=a.$;w.put("in",!1,a.id),y.hide(b(".gt_widget")),A.addEvent(document,"move",G(a)),c.on("statusChange",D(a),a.id),c.on("hoverChange",D(a),a.id)},J={};J.json={".gt_mask":{},".gt_popup_wrap":{".gt_popup_header":{".gt_popup_ready":"请先完成下方验证",".gt_popup_finish":"页面将在2秒后跳转",".gt_popup_cross":{}},".gt_popup_box":x.json}},J.show=function(a){var b=a.$;y.show(a.dom,400),"success"==w.get("status",a.id)&&a.refresh(),y.hide(b(".gt_popup_finish")),y.show(b(".gt_popup_ready"))},J.hide=function(a){y.hide(a.dom,400)},J.bindOn=function(a){var b=this,d=b.$;if(!w.get("DOMReady",b.id))return void c.once("DOMReady",function(){J.bindOn.call(b,a)},b.id);if("popup"===b.config.product){var e=x.parseSelector(a);if(!e)return void setTimeout(function(){J.bindOn.call(b,a)},100);w.put("popup_btn",e,b.id);var f=e.cloneNode(!0);A.addEvent(f,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,J.show(b)}),A.addEvent(d(".gt_mask"),"click",function(){J.hide(b)}),A.addEvent(d(".gt_popup_cross"),"click",function(){J.hide(b)}),f.href="javascript:;",f.id=e.id,e.style.display="none",e.id="origin_"+e.id,x.after(e,f),c.on("success",function(){y.show(d(".gt_popup_finish")),y.hide(d(".gt_popup_ready")),setTimeout(function(){J.hide(b),e.click()},2e3)},b.id)}},s.prototype.bindOn=function(a){return w.get("loaded",this.id)?J.bindOn.call(this,a):c.once("loaded",function(){J.bindOn.call(this,a)},this.id),this};var K=function(a){return function(){var b=w.get("status",a.id);("ready"==b||"success"==b)&&L(a)}},L=function(a){var b=a.$;B.move(0,b,!0),z.clear(a.$),y.hide(b(".gt_ie_success")),w.put("status","lock",a.id),Q.show("lock",a),c.emit("statusChange",a.id),R.clear(a),v(e.apiserver+"refresh.php?"+g({challenge:a.config.challenge,gt:a.config.gt}),function(b){M(b,a)},a)},M=function(a,b){c.emit("refresh",b.id),h(b.config,a),x.setType(b),x.setLink(b),x.loadImg(b),clearTimeout(w.get("autoRefresh",b.id)),w.put("autoRefresh",setTimeout(function(){b.refresh()},54e4),b.id)};s.prototype.refresh=function(){L(this)};var N=function(a){A.addEvent(a.$(".gt_refresh_button"),"click",K(a)),w.put("autoRefresh",setTimeout(function(){a.refresh()},54e4),a.id),c.on("success",function(){clearTimeout(w.get("autoRefresh",a.id))},a.id)},O=function(){var a=function(a,b){w.put("arr",[a],b)},b=function(a,b){w.get("arr",b).push(a)},c=function(a){for(var b=[],c=0;c<a.length-1;c++){var d=[];d[0]=Math.round(a[c+1][0]-a[c][0]),d[1]=Math.round(a[c+1][1]-a[c][1]),d[2]=Math.round(a[c+1][2]-a[c][2]),(0!==d[0]||0!==d[1]||0!==d[2])&&b.push(d)}return b},d=function(a){var b="()*,-./0123456789:?@ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqr",c=b.length,d="",e=Math.abs(a),f=parseInt(e/c);f>=c&&(f=c-1),f&&(d=b.charAt(f)),e%=c;var g="";return 0>a&&(g+="!"),d&&(g+="$"),g+d+b.charAt(e)},e=function(a){for(var b=[[1,0],[2,0],[1,-1],[1,1],[0,1],[0,-1],[3,0],[2,-1],[2,1]],c="stuvwxyz~",d=0,e=b.length;e>d;d++)if(a[0]==b[d][0]&&a[1]==b[d][1])return c[d];return 0},f=function(a){for(var b,f=c(w.get("arr",a)),g=[],h=[],i=[],j=0,k=f.length;k>j;j++)b=e(f[j]),b?h.push(b):(g.push(d(f[j][0])),h.push(d(f[j][1]))),i.push(d(f[j][2]));return g.join("")+"!!"+h.join("")+"!!"+i.join("")};return{encode:f,push:b,init:a}}(),P={};P.show=function(a,b,c){var d=b.$;"undefined"==typeof c&&(c=2e3);var e=d(".gt_info"),f=d(".gt_info_tip");f.className="gt_info_tip "+a;var g=w.get("infoHide",b.id);g&&clearTimeout(g);var h,i=d(".gt_info_time"),j=d(".gt_info_score"),k=d(".gt_info_countdown"),l=3;r(i,""),r(j,""),r(k,"");var m=function(){r(k,l),l--,-1==l&&clearInterval(h)};if("success"==a){var n=(w.get("endTime",b.id).getTime()-w.get("startTime",b.id))/1e3;r(i,n.toFixed(1)),r(j,100-w.get("score",b.id))}else"forbidden"==a&&(m(),h=setInterval(m,1e3),c=4e3);y.show(e,200),c&&w.put("infoHide",y.hide(e,300,c),b.id)};var Q={};Q.show=function(a,b){var c=b.$;c(".gt_ajax_tip").className="gt_ajax_tip "+a};var R={};R.set=function(a,b){var c=b.$,d=a?b.config.challenge:"",e=a?a.split("|")[0]:"",f=a?a.split("|")[0]+"|jordan":"";w.put("geetest_challenge",d,b.id),w.put("geetest_validate",e,b.id),w.put("geetest_seccode",f,b.id),c(".geetest_challenge").value=d,c(".geetest_validate").value=e,c(".geetest_seccode").value=f},R.write=function(a,b){R.set(a,b)},R.clear=function(a){R.set(!1,a)},s.prototype.getValidate=function(){var a={geetest_challenge:w.get("geetest_challenge",this.id),geetest_validate:w.get("geetest_validate",this.id),geetest_seccode:w.get("geetest_seccode",this.id)};return a.geetest_challenge?a:!1};var S={};return S.onStatusChange=function(a,b){var c=w.get("onStatusChange",b.id);"function"==typeof c&&c.call(b,a),"function"==typeof window.gt_custom_ajax&&(b.config.canvas?window.gt_custom_ajax(0,b.id,a):window.gt_custom_ajax(0,b.$,a))},S.onSuccess=function(){var a=this,b=w.get("onSuccess",a.id);"function"==typeof b&&b.call(a),S.onStatusChange("Success",a),"function"==typeof window.gt_custom_ajax&&(a.config.canvas?window.gt_custom_ajax(1,a.id,"Success"):window.gt_custom_ajax(1,a.$,"Success"))},S.onRefresh=function(){var a=this,b=w.get("onRefresh",a.id);"function"==typeof b&&b.call(a),"function"==typeof window.gt_custom_refresh&&window.gt_custom_refresh(a.$)},S.onFail=function(){var a=w.get("onFail",this.id);"function"==typeof a&&a.call(this),S.onStatusChange("Fail",this)},S.onForbidden=function(){S.onStatusChange("Forbidden",this)},S.onAbuse=function(){S.onStatusChange("Abuse",this)},S.onError=function(){var a=this;w.put("status","error",a.id),Q.show("error",a),P.show("error",a,!1),clearTimeout(w.get("autoRefresh",a.id));var b=w.get("onError",a.id);"function"==typeof b&&b.call(a),"function"==typeof window.gt_custom_error&&window.gt_custom_error(a,a.$)},S.onReady=function(){var a=w.get("onReady",this.id);"function"==typeof a&&a.call(this),"function"==typeof window.onGeetestLoaded&&window.onGeetestLoaded(this)},s.prototype.onSuccess=function(a){return w.put("onSuccess",a,this.id),this},s.prototype.onFail=function(a){return w.put("onFail",a,this.id),this},s.prototype.onRefresh=function(a){return w.put("onRefresh",a,this.id),this},s.prototype.onError=function(a){return w.put("onError",a,this.id),this},s.prototype.onStatusChange=function(a){return w.put("onStatusChange",a,this.id),this},s.prototype.onReady=function(a){return w.put("onReady",a,this.id),this},s});